{"ast":null,"code":"import { atom } from \"recoil\";\nconst instanceOfBoards = object => {\n  return Array.isArray(object) && object.every(board => instanceOfBoards(board));\n};\nconst localStorageEffect = key => _ref => {\n  let {\n    setSelf,\n    onSet\n  } = _ref;\n  const data = localStorage.getItem(key);\n  if (data !== null && data !== undefined) {\n    const json = raw => {\n      try {\n        return JSON.parse(raw);\n      } catch (error) {\n        return false;\n      }\n    };\n    if (json(data) && instanceOfBoards(json(data))) {\n      setSelf(json(data));\n    }\n  }\n  onSet(newValue => {\n    localStorage.setItem(key, JSON.stringify(newValue));\n  });\n};\nexport const toDosState = atom({\n  key: \"toDos\",\n  default: [{\n    title: \"해야 함\",\n    id: 0,\n    toDos: [{\n      text: \"투두리스트 클론 끝내기\",\n      id: 0\n    }, {\n      text: \"내일 학교 갈 준비하기\",\n      id: 1\n    }]\n  }, {\n    title: \"하는 중\",\n    id: 1,\n    toDos: []\n  }, {\n    title: \"완료\",\n    id: 2,\n    toDos: [{\n      text: \"하루 4끼 먹기\",\n      id: 2\n    }, {\n      text: \"공부하기\",\n      id: 3\n    }]\n  }],\n  effects: [localStorageEffect(\"trello-clone-todos\")]\n});\nexport const isLightState = atom({\n  key: \"isLight\",\n  default: window.matchMedia(\"(prefers-color-scheme: light)\").matches ? true : false\n});","map":{"version":3,"names":["atom","instanceOfBoards","object","Array","isArray","every","board","localStorageEffect","key","setSelf","onSet","data","localStorage","getItem","undefined","json","raw","JSON","parse","error","newValue","setItem","stringify","toDosState","default","title","id","toDos","text","effects","isLightState","window","matchMedia","matches"],"sources":["/Users/kwak/Documents/study/멋사/Likelion_hufs10th/react-masterclass/src/atom.ts"],"sourcesContent":["import { atom } from \"recoil\";\n\nexport interface IToDo {\n  id: number;\n  text: string;\n}\n\nexport interface IBoard {\n  id: number;\n  title: string;\n  toDos: IToDo[];\n}\n\nconst instanceOfBoards = (object: any): object is IBoard[] => {\n  return (\n    Array.isArray(object) &&\n    (object as IBoard[]).every((board) => instanceOfBoards(board))\n  );\n};\n\nconst localStorageEffect =\n  (key: string) =>\n  ({ setSelf, onSet }: any) => {\n    const data = localStorage.getItem(key);\n\n    if (data !== null && data !== undefined) {\n      const json = (raw: string) => {\n        try {\n          return JSON.parse(raw);\n        } catch (error) {\n          return false;\n        }\n      };\n\n      if (json(data) && instanceOfBoards(json(data))) {\n        setSelf(json(data));\n      }\n    }\n\n    onSet((newValue: IBoard[]) => {\n      localStorage.setItem(key, JSON.stringify(newValue));\n    });\n  };\n\nexport const toDosState = atom<IBoard[]>({\n  key: \"toDos\",\n  default: [\n    {\n      title: \"해야 함\",\n      id: 0,\n      toDos: [\n        { text: \"투두리스트 클론 끝내기\", id: 0 },\n        { text: \"내일 학교 갈 준비하기\", id: 1 },\n      ],\n    },\n    {\n      title: \"하는 중\",\n      id: 1,\n      toDos: [],\n    },\n    {\n      title: \"완료\",\n      id: 2,\n      toDos: [\n        { text: \"하루 4끼 먹기\", id: 2 },\n        { text: \"공부하기\", id: 3 },\n      ],\n    },\n  ],\n  effects: [localStorageEffect(\"trello-clone-todos\")],\n});\n\nexport const isLightState = atom<boolean>({\n  key: \"isLight\",\n  default: window.matchMedia(\"(prefers-color-scheme: light)\").matches\n    ? true\n    : false,\n});\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,QAAQ;AAa7B,MAAMC,gBAAgB,GAAIC,MAAW,IAAyB;EAC5D,OACEC,KAAK,CAACC,OAAO,CAACF,MAAM,CAAC,IACpBA,MAAM,CAAcG,KAAK,CAAEC,KAAK,IAAKL,gBAAgB,CAACK,KAAK,CAAC,CAAC;AAElE,CAAC;AAED,MAAMC,kBAAkB,GACrBC,GAAW,IACZ,QAA6B;EAAA,IAA5B;IAAEC,OAAO;IAAEC;EAAW,CAAC;EACtB,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAACL,GAAG,CAAC;EAEtC,IAAIG,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAKG,SAAS,EAAE;IACvC,MAAMC,IAAI,GAAIC,GAAW,IAAK;MAC5B,IAAI;QACF,OAAOC,IAAI,CAACC,KAAK,CAACF,GAAG,CAAC;MACxB,CAAC,CAAC,OAAOG,KAAK,EAAE;QACd,OAAO,KAAK;MACd;IACF,CAAC;IAED,IAAIJ,IAAI,CAACJ,IAAI,CAAC,IAAIV,gBAAgB,CAACc,IAAI,CAACJ,IAAI,CAAC,CAAC,EAAE;MAC9CF,OAAO,CAACM,IAAI,CAACJ,IAAI,CAAC,CAAC;IACrB;EACF;EAEAD,KAAK,CAAEU,QAAkB,IAAK;IAC5BR,YAAY,CAACS,OAAO,CAACb,GAAG,EAAES,IAAI,CAACK,SAAS,CAACF,QAAQ,CAAC,CAAC;EACrD,CAAC,CAAC;AACJ,CAAC;AAEH,OAAO,MAAMG,UAAU,GAAGvB,IAAI,CAAW;EACvCQ,GAAG,EAAE,OAAO;EACZgB,OAAO,EAAE,CACP;IACEC,KAAK,EAAE,MAAM;IACbC,EAAE,EAAE,CAAC;IACLC,KAAK,EAAE,CACL;MAAEC,IAAI,EAAE,cAAc;MAAEF,EAAE,EAAE;IAAE,CAAC,EAC/B;MAAEE,IAAI,EAAE,cAAc;MAAEF,EAAE,EAAE;IAAE,CAAC;EAEnC,CAAC,EACD;IACED,KAAK,EAAE,MAAM;IACbC,EAAE,EAAE,CAAC;IACLC,KAAK,EAAE;EACT,CAAC,EACD;IACEF,KAAK,EAAE,IAAI;IACXC,EAAE,EAAE,CAAC;IACLC,KAAK,EAAE,CACL;MAAEC,IAAI,EAAE,UAAU;MAAEF,EAAE,EAAE;IAAE,CAAC,EAC3B;MAAEE,IAAI,EAAE,MAAM;MAAEF,EAAE,EAAE;IAAE,CAAC;EAE3B,CAAC,CACF;EACDG,OAAO,EAAE,CAACtB,kBAAkB,CAAC,oBAAoB,CAAC;AACpD,CAAC,CAAC;AAEF,OAAO,MAAMuB,YAAY,GAAG9B,IAAI,CAAU;EACxCQ,GAAG,EAAE,SAAS;EACdgB,OAAO,EAAEO,MAAM,CAACC,UAAU,CAAC,+BAA+B,CAAC,CAACC,OAAO,GAC/D,IAAI,GACJ;AACN,CAAC,CAAC"},"metadata":{},"sourceType":"module"}